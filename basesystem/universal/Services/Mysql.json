{
    "name": "Mysql",
    "install": {
        "commands": ["sofin get mysql"],
        "expectStdOut": ["Preparing application: Mysql", "All done."]
    },
    "start": {
        "commands": [
            "SERVICE_ROOT/exports/mysqld --defaults-file=SERVICE_PREFIX/service.conf --skip-grant-tables -C utf8 &",
        ],
        "expectStdErr": ["ready for connections"],
        "expectOutputTimeout": 25
    },
    "validate": {
        "commands": [
            "test ! -d SERVICE_PREFIX/tmp && mkdir -p SERVICE_PREFIX/tmp && chmod 700 SERVICE_PREFIX/tmp",
            "test ! -d SERVICE_PREFIX/database && mkdir -p SERVICE_PREFIX/database && chmod 700 SERVICE_PREFIX/database",
            "test ! -f SERVICE_PREFIX/service.conf && printf '
[mysqld_safe]
socket      = SERVICE_PREFIX/service.sock
nice        = 0

[mysqld]
# user        = mysql
pid-file    = SERVICE_PREFIX/service.pid
# socket    = mysqld.sock
basedir     = SERVICE_ROOT
port        = SERVICE_PORT
datadir     = SERVICE_PREFIX/database
tmpdir      = SERVICE_PREFIX/tmp
# language    = /usr/share/mysql/english
skip-external-locking
bind-address        = 0.0.0.0
key_buffer      = 16M
max_allowed_packet  = 16M
thread_stack        = 128K
thread_cache_size   = 8
myisam-recover      = BACKUP
max_connections        = 100
thread_concurrency     = 10
query_cache_limit       = 1M
query_cache_size        = 16M
general-log-file     = SERVICE_PREFIX/service.log
expire_logs_days    = 10
max_binlog_size         = 100M

[mysqldump]
quick
quote-names
max_allowed_packet  = 16M

[mysql]
#no-auto-rehash # faster start of mysql but no tab completition

[isamchk]
key_buffer      = 16M
' > SERVICE_PREFIX/service.conf"]
    },
    "stop": {
        "commands": ["kill $(cat SERVICE_PREFIX/service.pid)"]
    }
}