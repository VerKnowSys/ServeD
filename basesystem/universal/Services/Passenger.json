{
    "softwareName": "Passenger",
    "install": {
        "commands": ["sofin get passenger"],
        "expectStdOut": ["All done"]
    },
    "start": {
        "commands": ["SERVICE_ROOT/exports/nginx -c SERVICE_PREFIX/service.conf"]
    },
    "stop": {
        "commands": ["SERVICE_ROOT/exports/nginx -c SERVICE_PREFIX/service.conf -s stop"]
    },
    "validate": {
        "commands": [
            "test ! -d SERVICE_PREFIX/SERVICE_DOMAIN && mkdir -p SERVICE_PREFIX/SERVICE_DOMAIN",
            "test ! -f SERVICE_PREFIX/service.conf && printf '
worker_processes 2;
events {
    worker_connections 1024;
}

http {
    include SERVICE_ROOT/conf/mime.types;
    default_type application/octet-stream;
    sendfile on;
    keepalive_timeout 270;
    error_log SERVICE_PREFIX/service.log;
    server {
        listen SERVICE_PORT;
        server_name SERVICE_DOMAIN;
        passenger_enabled on;
        rails_env production;
        location / {
            root SERVICE_PREFIX/SERVICE_DOMAIN/public;
            index index.html index.htm;
        }
    }
}
' > SERVICE_PREFIX/service.conf",
            "SERVICE_ROOT/exports/nginx -t -c SERVICE_PREFIX/service.conf"
        ],
        "expectStdErr": ["test is successful"]
    },
    "reload": {
        "commands": ["SERVICE_ROOT/exports/nginx -c SERVICE_PREFIX/service.conf -s reload"]
    }
}