{
    "name": "Redis",
    "schedulerActions": [
        {
            "cronEntry": "0 0/1 * * * ?",
            "shellCommands": [
                "cp SERVICE_PREFIX/database/database.rdf SERVICE_PREFIX/database/database.rdf.backup && echo 'Backup ok'"
            ]
        },
        {
            "cronEntry": "0 0/2 * * * ?",
            "shellCommands": [
                "echo 'Pam pam pam'"
            ]
        }
    ],
    "install": {
        "commands": ["sofin get redis"],
        "expectStdOut": ["Preparing application: Redis", "All done."]
    },
    "configure": {
        "commands": [
            "test ! -d SERVICE_PREFIX/database && mkdir -p SERVICE_PREFIX/database"
        ]
    },
    "start": {
        "commands": [
            "test ! -d SERVICE_PREFIX/database && mkdir -p SERVICE_PREFIX/database",
            "SERVICE_ROOT/exports/redis-server SERVICE_PREFIX/service.conf"
        ]
    },
    "stop": {
        "commands": ["kill $(cat SERVICE_PREFIX/service.pid)"]
    },
    "validate": {
        "commands": ["test ! -f SERVICE_PREFIX/service.conf && printf '
# Default Redis service configuration
port SERVICE_PORT
pidfile SERVICE_PREFIX/service.pid
dir SERVICE_PREFIX/database
dbfilename database.rdf
daemonize yes
rdbcompression yes
save 900 1
save 300 10
save 60 10000
appendonly no
appendfsync everysec
activerehashing yes
loglevel notice
logfile SERVICE_PREFIX/service.log
' > SERVICE_PREFIX/service.conf"]
    }
}