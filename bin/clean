#!/bin/sh

if [ "$(id -u)" != "0" ]; then
	echo "Consider running this script as root to be sure of cleaning non current user / root old files."
fi

if [ "$1" = "deep" ]; then
    echo "Deep clean"
    rm -rf ~/.ivy2
fi

if [ "$1" = "sysonly" ]; then
  echo "Deep clean of user and system databases"
  cwd=`pwd`
  cd /Users
  for i in *; do
    rm -vf /Users/$i/$i.db*
    rm -vf /Users/$i/$i-svd*
    rm -vf /Users/$i/$i.pid
  done
  rm -vf /SystemUsers/accounts.db_*
  rm -vf /SystemUsers/0.pid
  rm -vf /SystemUsers/boot-svd*
  cd $cwd
  exit
fi

bin/sbt clean
echo "Project source cleaned.."

rm -f ./kick ./shell ./usage_gather
rm -f lib/*.o*
rm -f lib/*.so
rm -f lib/*.dylib
echo "Native code and libraries wiped out."
