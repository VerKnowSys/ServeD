#!/bin/sh


system="$(uname)"
export CXX="clang++"

rm -rf lib/*.dylib *.dSYM spawn userspawn

check() {
    if [ "$1" = "0" ]; then
        echo "$2 compiled sucessfully"
    else
        echo "Failure"
        exit 1
    fi
}

$CXX -Os -c -fPIC lib/spawnlib_src/utils.cc -o lib/utils.o
check $? "Utils"

$CXX -Os -c -fPIC lib/spawnlib_src/core.cc -o lib/core.o
check $? "Core"

$CXX -Os -fPIC lib/spawnlib_src/kick.cc -o kick lib/core.o lib/utils.o
check $? "KickStart"
