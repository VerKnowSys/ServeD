#!/bin/sh

unset SBT_OPTS
unset JAVA_OPTS

FLAGS="-d32"

# export SBT_OPTS=" ${FLAGS} -Xmx2000m -Xms2000m -Xmn2g -Xss128k -XX:MaxPermSize=1g -server -XX:+UseParNewGC -XX:+CMSClassUnloadingEnabled -XX:+AggressiveOpts -XX:+UseFastAccessorMethods -XX:+UseStringCache -XX:+UseCompressedStrings -XX:+OptimizeStringConcat -XX:+UseBiasedLocking -XX:ParallelGCThreads=20"

exec java \
${FLAGS} \
-Xss128k \
-XX:MaxPermSize=1g \
-XX:+UseParNewGC \
-XX:+CMSClassUnloadingEnabled \
-XX:+AggressiveOpts \
-XX:+UseFastAccessorMethods \
-XX:+UseStringCache \
-XX:+OptimizeStringConcat \
-XX:+UseBiasedLocking \
-XX:ParallelGCThreads=20 \
-Djna.library.path=$(pwd)/lib \
-Dfile.encoding=UTF-8 \
-Djava.net.preferIPv4Stack=true \
-server \
-javaagent:/lib/jrebel/jrebel.jar \
-jar $(dirname $0)/../vendor/sbt-launch.jar "$@"
