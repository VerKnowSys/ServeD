#!/bin/sh

rootcheck() {
    if [ "$(id -u)" != "0" ]; then
        echo "System Deployer requires root privileges to run!"
        exit 1
    fi
}

system="$(uname)"

bin/current
bin/sbt assembly && \
if [ $system = "Darwin" ]; then
    sudo bin/install
else
    rootcheck && \
    bin/install
fi
bin/nativebuild && \
if [ $system = "Darwin" ]; then
    sudo bin/nativeinstall
else
    rootcheck && \
    bin/nativeinstall
fi

echo "Done. Success!"
